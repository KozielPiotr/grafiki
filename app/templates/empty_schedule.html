{% extends "base_schedule.html" %}

{% block content %}
{% from "_formhelpers.html" import render_field1, render_field2, render_field3 %}

<div>
    <!-- Legend of events -->
    <table style="font-size: 12px">
        <caption>Legenda zdarzeń:</caption>
        <tr>
            <th>
                <ul>
                    <li>UW - urlop wypoczynkowy</li><br>
                    <li>UNŻ - urlop na żądanie</li>
                </ul>
            </th>
            <th>
                <ul>
                    <li>L4 - zwolnienie L4</li><br>
                    <li>UO - urlop okolicznościowy</li>
                </ul>
            </th>
            <th>
                <ul>
                    <li>UOJ - urlop ojcowski</li><br>
                    <li>UR - urlop rodzicielski</li>
                </ul>
            </th>
        </tr>
    </table>
    <br><br>

    <!-- Schedule -->
    <form action="" method="post">
        <table class="table">
            <caption>Tworzenie grafiku dla sklepu {{ shop }} na rok {{ year }}, miesiąc {{ mn }}</caption>
    <!-- headers with shop, month, workers -->
            <thead>
            <tr>
                <th>{{ shop }}</th>
                <th rowspan="3">D</th>
                {% for i in sw %}
                    <th rowspan="2" colspan="4">{{ i }}</th>
                {% endfor %}
            </tr>
            <tr>
                <th>{{ mn }}</th>
            </tr>
            <tr>
                <th>{{ year }}</th>
                {% for i in sw %}
                    <th>Od</th>
                    <th>Do</th>
                    <th>H</th>
                    <th>Podpis</th>
                {% endfor %}
            </tr>
            </thead>
    <!-- body with days and according data -->
            <tbody>
            {% for i in cal.itermonthdays2(yearn, monthn) %}
                {% if i[0] > 0 %}
                    <tr>
                        <td>{{ wdn[i[1]] }}</td>  <!-- day of the week (name) -->
                        <td>{{ i[0] }}</td>  <!-- day of the week (number) -->
                        {% for j in sw %}
                            <!-- form for begin hour -->
                            <td>{{ render_field1(form.od, i, j) }}</td>
                            <!-- form for end hour -->
                            <td>{{ render_field2(form.do, i, j) }}</td>
                            <!-- form for sum of worked hours -->
                            <td>{{ render_field3(form.h, i, j) }}</td>
                             <!-- form for signature field or event mark -->
                            <td>.......</td>
                        {% endfor %}
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
    <!-- footer with amount of hours to work and hours worked by each of workers -->
            <tfoot>
            <tr>
                <td colspan="2">H/mc</td>
                {% for i in sw %}
                    <td colspan="4">Suma H:</td>
                {% endfor %}
            </tr>
            <tr>
                <td colspan="2">'godz/mc'</td>  <!-- amount of hours to work in exact month -->
                {% for i in sw %}
                    <td colspan="4">'suma przepracowanych godzin'</td> <!-- sum of hours worked by iterated worker -->
                {% endfor %}
            </tr>
            <tr>
                <td colspan="2">Pozostało H:</td>
                {% for i in sw %}
                    <td colspan="4">'nadgodziny lub niedogodziny'</td> <!-- hours left to assign or overtime -->
                {% endfor %}
            </tr>
            </tfoot>
        </table>
        {{ form.OK }}
    </form>
</div>
{% endblock %}